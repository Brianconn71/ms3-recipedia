{% extends "base.html" %}
{% block content %}

    <section class="container search-container">
        <h2 class="search-heading recipedia-text">Search for a recipe from our Database</h2>
        <div class="row">
            <div class="col s8">
                <form>
                    <div class="input-field">
                        <input type="search" name="search" id="search"class="searchbox" placeholder="Search for a recipe" required />
                        <label class="label-icon" for="search"><i class="fas fa-search"></i></label>
                        <i class="fas fa-window-close prefix"></i>
                    </div>
                </form>
            </div>
        </div>
        <!-- <div class="search-bar-and-btn">
                <input type="search" name="search" id="search" class="searchbox form-control-lg shadow-2-strong" placeholder="Search for a recipe" autofocus>
            <div class="search-btn">
                <button type="button" class="btn btn-primary search-btn-primary"><i class="fas fa-search"></i></button>
            </div>
        </div> -->
    </section>
    <section class="latest-recipes">
        <div class="row">
            <div class="col s12 m6">
                {% for recipe in recipes %}
                    <div class="card">
                        <div class="card-image">
                        <img src="{{ recipe.img_upload }}">
                        <span class="card-title recipedia-text">{{recipe.recipe_name}}</span>
                        <a class="btn-floating halfway-fab waves-effect waves-light red"><i class="far fa-save"></i></a>
                        </div>
                        <div class="card-content hoverable">
                        {% for ing in recipe.ingredients %}
                               <ul>
                                   <li>{{ ing }}</li>
                               </ul> 
                        {% endfor %}
                        </div>
                        <div class="card-action">
                        <a href="#">This is a link</a>
                        <small>Created by: {{ recipe.created_by  }}</small>
                        {% if session.user|lower == recipe.created_by|lower or session.user|lower == 'admin' %}
                            <a href="#modal1" class="waves-effect waves-light btn-small modal-trigger modal-trigger red"><i class="far fa-trash-alt right"></i>Delete</a>
                            <a href="{{ url_for('edit_recipe', recipe_id=recipe._id )}}" class="waves-effect waves-light btn-small blue"><i class="far fa-edit right"></i>Edit</a>
                        {% endif %}
                        </div>
                    </div>
                    <div id="modal1" class="modal">
                        <div class="modal-content">
                            <h4>Confirm Delete</h4>
                            <p>Are you sure you want to delete this recipe?</p>
                        </div>
                        <div class="modal-footer">
                            <a href="{{ url_for('get_recipes') }}" class="waves-effect waves-green btn-flat red"> Cancel <i class="far fa-window-close right"></i></a>
                            <a href="{{ url_for('delete_recipe', recipe_id=recipe._id )}}" class="modal-close waves-effect waves-green btn-flat">Confirm</a>
                        </div>
                    </div>
                {% endfor%}
            </div>
        </div>
    </section>

    <!-- {% for recipe in recipes %}
        {{ recipe.recipe_name }}<br>
        {{ recipe.date  }}<br>
        {{ recipe.created_by  }}<br>
    {% endfor %} -->

{% endblock %}